(this["webpackJsonpsegware-app"]=this["webpackJsonpsegware-app"]||[]).push([[0],{193:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(57),s=n.n(a),c=n(39),o=n(12),i=n(9),u=n.n(i),l=n(11),p=n(20),j=n(219),d=n(213),b=n(217),h=n(216),f=n(2),g=function(e){var t=e.formData,n=t.username,r=t.password,a=e.onInputChange,s=e.onHandleSubmit,c=e.goRegister,o=e.isValid,i=e.goForgot;return Object(f.jsx)("div",{children:Object(f.jsxs)(d.a,{size:"large",children:[Object(f.jsxs)(b.a,{stacked:!0,style:{backgroundColor:"rgb(33, 33, 33)"},basic:!0,children:[Object(f.jsx)(d.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",name:"username",value:n,onChange:function(e){return a(e)}}),Object(f.jsx)(d.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",value:r,onChange:function(e){return a(e)}}),Object(f.jsx)(h.a,{name:"submitButtom",type:"submit",color:"red",fluid:!0,size:"large",onClick:function(){return s()},disabled:o(),children:"Entrar"})]}),Object(f.jsxs)(h.a,{inverted:!0,color:"red",onClick:function(){return c()},animated:"fade",children:[Object(f.jsx)(h.a.Content,{visible:!0,children:"Ainda n\xe3o tenho conta"}),Object(f.jsx)(h.a.Content,{hidden:!0,children:"Cadastrar"})]}),Object(f.jsxs)(h.a,{inverted:!0,color:"red",onClick:function(){return i()},animated:"fade",children:[Object(f.jsx)(h.a.Content,{visible:!0,children:"Esqueceu a senha ?"}),Object(f.jsx)(h.a.Content,{hidden:!0,children:"Recuperar"})]})]})})},x=n(210),O=n(218),m=function(e){var t=e.message;return Object(f.jsx)(x.a,{style:{margin:"30px 0"},children:Object(f.jsx)(O.a,{as:"h1","data-testid":"top-title",color:"red",textAlign:"center",children:t})})},v=function(e){var t=e.message;return Object(f.jsx)("div",{children:Object(f.jsx)(O.a,{color:"red",size:"tiny",children:t})})},w=n(32),k=n.n(w),C=function(e){return localStorage.setItem("token",JSON.stringify(e))},y=function(){return JSON.parse(localStorage.getItem("token"))},S=function(e){return localStorage.setItem("username",JSON.stringify(e))};function I(e,t){return A.apply(this,arguments)}function A(){return(A=Object(l.a)(u.a.mark((function e(t,n){var r,a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://segware-book-api.segware.io/api/sign-in",r={"Content-Type":"application/json"},a={username:t,password:n},e.prev=3,e.next=6,k.a.post("https://segware-book-api.segware.io/api/sign-in",a,r);case 6:if(s=e.sent,!(c=s.data)){e.next=11;break}return C(c),e.abrupt("return",c);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return",e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}var E=function(){var e=Object(o.g)(),t=Object(r.useState)(new Map),n=Object(p.a)(t,2),a=n[0],s=n[1],c=Object(r.useCallback)((function(e){var t=e.target,n=t.name,r=t.value;s((function(e){return new Map(e).set(n,r)}))}),[]),i=function(){var t=Object(l.a)(u.a.mark((function t(){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.get("username"),r=a.get("password"),S(n),t.next=5,I(n,r);case 5:e.push("/feed");case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(f.jsx)(j.a,{textAlign:"center",style:{height:"115vh",backgroundColor:"rgb(33, 33, 33)",marginTop:"-15vh"},verticalAlign:"middle",children:Object(f.jsxs)(j.a.Column,{style:{maxWidth:500},children:[Object(f.jsx)(m,{message:"SEGWARE"}),Object(f.jsx)(v,{message:"LOGIN"}),Object(f.jsx)(g,{formData:a,onInputChange:c,onHandleSubmit:i,goRegister:function(){return e.push("/sign-up")},goForgot:function(){return e.push("/forgot-password")},isValid:function(){var e=a.get("username"),t=a.get("password");if(e){if(!/^[A-Za-z\xe1\xe0\xe2\xe3\xe9\xe8\xea\xed\xef\xf3\xf4\xf5\xf6\xfa\xe7\xf1\xc1\xc0\xc2\xc3\xc9\xc8\xcd\xcf\xd3\xd4\xd5\xd6\xda\xc7\xd1 ]+$/.test(e))return!0}return!t||t.length<=0}})]})})},T=n(215),z=function(e){var t=e.children;return Object(f.jsx)(T.a,{compact:!0,color:"red",style:{backgroundColor:"rgb(33, 33, 33)"},children:t})},P=(n(123),function(e){var t=e.formData,n=t.username,r=t.password,a=e.onInputChange,s=e.onHandleSubmit,c=e.isValid;return Object(f.jsx)(d.a,{size:"large",children:Object(f.jsxs)(b.a,{stacked:!0,style:{backgroundColor:"rgb(33, 33, 33)"},children:[Object(f.jsx)(d.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",value:n,name:"username",onChange:function(e){return a(e)}}),Object(f.jsx)(d.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",value:r,type:"password",name:"password",onChange:function(e){return a(e)}}),Object(f.jsx)(h.a,{color:"red",fluid:!0,size:"large",onClick:function(){return s()},disabled:c(),children:"Cadastrar"})]})})});function D(e,t){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(u.a.mark((function e(t,n){var r,a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://segware-book-api.segware.io/api/sign-up",r={"Content-Type":"application/json"},a={username:t,password:n},e.prev=3,e.next=6,k.a.post("https://segware-book-api.segware.io/api/sign-up",a,r);case 6:if(s=e.sent,!(c=s.data)){e.next=10;break}return e.abrupt("return",c);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}var H=function(){var e=Object(o.g)(),t=Object(r.useState)(new Map),n=Object(p.a)(t,2),a=n[0],s=n[1],i=function(){var t=Object(l.a)(u.a.mark((function t(){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.get("username"),r=a.get("password"),t.next=4,D(n,r);case 4:e.push("/sign-in");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),d=Object(r.useCallback)((function(e){var t=e.target,n=t.name,r=t.value;s((function(e){return new Map(e).set(n,r)}))}),[]);return Object(f.jsx)(j.a,{textAlign:"center",style:{height:"115vh",backgroundColor:"rgb(33, 33, 33)",marginTop:"-15vh"},verticalAlign:"middle",children:Object(f.jsxs)(j.a.Column,{style:{maxWidth:450},children:[Object(f.jsx)(m,{message:"SEGWARE"}),Object(f.jsx)(v,{message:"CADASTRO"}),Object(f.jsx)(P,{formData:a,onInputChange:d,onHandleSubmit:i,isValid:function(){var e=a.get("username"),t=a.get("password");if(e){if(!/^[A-Za-z\xe1\xe0\xe2\xe3\xe9\xe8\xea\xed\xef\xf3\xf4\xf5\xf6\xfa\xe7\xf1\xc1\xc0\xc2\xc3\xc9\xc8\xcd\xcf\xd3\xd4\xd5\xd6\xda\xc7\xd1 ]+$/.test(e))return!0}return!t||t.length<=0}}),Object(f.jsxs)(z,{children:["J\xe1 possui conta ?"," ",Object(f.jsx)(c.b,{"data-testid":"btn-link",to:"/sign-in",children:"logar"})]})]})})},U=n(81),J=n(209),M=n(212),V=function(e){var t=e.formData.content,n=e.onInputChange,r=e.onHandleSubmit,a=e.showUsername,s=e.goAllContent;return Object(f.jsxs)("div",{children:[Object(f.jsxs)(d.a,{children:[Object(f.jsx)(O.a,{style:{marginTop:"20vh"},color:"red",as:"h2",children:"SEU POST"}),Object(f.jsx)(U.a,{size:"big",name:"user",color:"red",style:{marginTop:"3vh"}}),Object(f.jsx)(v,{message:a||"username",children:" "}),Object(f.jsx)(J.a,{placeholder:"Escreva aqui",style:{marginTop:"6vh"},name:"text",value:t,onChange:function(e){return n(e)}}),Object(f.jsx)(M.a,{content:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("code",{children:"Post enviado com sucesso"}),"."]}),on:"click",popper:{id:"popper-container",style:{zIndex:2e3}},trigger:Object(f.jsx)(h.a,{style:{marginTop:"1vh"},type:"submit",color:"red",fluid:!0,size:"tiny",onClick:function(){return r()},children:"Enviar"})})]}),Object(f.jsxs)(h.a,{style:{marginTop:"2vh"},inverted:!0,color:"red",onClick:function(){return s()},animated:"fade",children:[Object(f.jsx)(h.a.Content,{visible:!0,children:"Ver todos os seus posts"}),Object(f.jsx)(h.a.Content,{hidden:!0,children:"visualizar"})]})]})};function W(e){return N.apply(this,arguments)}function N(){return(N=Object(l.a)(u.a.mark((function e(t){var n,r,a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://segware-book-api.segware.io/api/feed",n=y(),r={"Content-Type":"application/json",authorization:"Bearer ".concat(n)},a={content:t},e.prev=4,e.next=7,k.a.post("https://segware-book-api.segware.io/api/feed",a,{headers:r});case 7:if(s=e.sent,!(c=s.data)){e.next=11;break}return e.abrupt("return",c);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})))).apply(this,arguments)}var B=function(){var e=Object(o.g)(),t=Object(r.useState)(new Map),n=Object(p.a)(t,2),a=n[0],s=n[1],c=Object(r.useCallback)((function(e){var t=e.target,n=t.name,r=t.value;s((function(e){return new Map(e).set(n,r)}))}),[]),i=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.get("text"),e.next=3,W(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)(j.a,{textAlign:"center",style:{height:"105vh",backgroundColor:"rgb(33, 33, 33)"},verticalAlign:"top",children:Object(f.jsx)(j.a.Column,{style:{maxWidth:600},children:Object(f.jsx)(V,{formData:a,onHandleSubmit:i,onInputChange:c,showUsername:JSON.parse(localStorage.getItem("username")),goAllContent:function(){return e.push("/feeds")}})})})},G=n(214),F=n(211);function q(e,t,n){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(u.a.mark((function e(t,n,r){var a,s,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://segware-book-api.segware.io/api/reaction",a=y(),s={"Content-Type":"application/json",authorization:"Bearer ".concat(a)},c={feedId:t,like:n,love:r},e.prev=4,e.next=7,k.a.post("https://segware-book-api.segware.io/api/reaction",c,{headers:s});case 7:return o=e.sent,e.abrupt("return",o.data);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}var $=function(e){var t=e.index,n=e.item,a=Object(r.useState)(!1),s=Object(p.a)(a,2),c=s[0],o=s[1],i=Object(r.useState)(!1),j=Object(p.a)(i,2),d=j[0],h=j[1];Object(r.useEffect)((function(){Object.entries(n).slice(0,15).map((function(e){return"likes"===e[0]&&0===e[1]?(console.log(e[0],"===",e[1]),o(!1)):"likes"===e[0]&&1===e[1]?(console.log(e[0],"===",e[1]),o(!0)):"loves"===e[0]&&0===e[1]?(console.log(e[0],"===",e[1]),h(!1)):"loves"===e[0]&&1===e[1]?h(!0):void 0}))}),[o,h,n]);var g=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t,c,d);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(b.a,{inverted:!0,children:[Object(f.jsx)(v,{message:"TEXTO ".concat(t+1)}),Object(f.jsxs)(G.a.Group,{children:[Object(f.jsx)(x.a,{fluid:!0,textAlign:"justified",style:{color:"whitesmoke"},children:Object(f.jsx)("p",{children:n.content})}),Object(f.jsx)(F.a,{}),Object(f.jsx)(G.a,{children:Object(f.jsx)(G.a.Content,{children:Object(f.jsxs)(G.a.Extra,{children:[Object(f.jsx)(U.a,{color:d?"red":"grey",size:"big",style:{marginRight:"30vh"},name:"like",onClick:Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!d),e.next=3,g(n.id);case 3:case"end":return e.stop()}}),e)}))),"data-testid":"like"}),Object(f.jsx)(U.a,{rotated:c?"clockwise":"counterclockwise",color:c?"yellow":"grey",size:"big",name:"favorite",onClick:Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!c),e.next=3,g(n.id);case 3:case"end":return e.stop()}}),e)})))})]})})})]})]})};function L(){return X.apply(this,arguments)}function X(){return(X=Object(l.a)(u.a.mark((function e(){var t,n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://segware-book-api.segware.io/api/feeds",t=y(),n={"Content-Type":"application/json",authorization:"Bearer ".concat(t)},e.prev=3,e.next=6,k.a.get("https://segware-book-api.segware.io/api/feeds",{headers:n});case 6:if(r=e.sent,!(a=r.data)){e.next=10;break}return e.abrupt("return",a);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("return",e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}var K=function(){var e=Object(r.useState)(),t=Object(p.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:return t=e.sent,a(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(f.jsxs)(j.a,{style:{backgroundColor:"rgb(33, 33, 33)"},children:[Object(f.jsx)(m,{message:"TODOS OS POSTS"}),n?Object(f.jsx)(j.a,{textAlign:"center",style:{padding:"10vh"},children:n?n.slice(0,20).map((function(e,t){return Object(f.jsx)(j.a.Column,{width:5,children:Object(f.jsx)($,{index:t,item:e})},t)})):null}):null]})},Q=function(e){var t=e.formData.username,n=e.onInputChange,r=e.onHandleSubmit,a=e.isValid,s=e.showPassword;return Object(f.jsx)(d.a,{size:"large",children:Object(f.jsxs)(b.a,{stacked:!0,style:{backgroundColor:"rgb(33, 33, 33)"},children:[Object(f.jsx)(d.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",value:t,name:"username",onChange:function(e){return n(e)}}),Object(f.jsx)(d.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",value:s||" ",loading:!s,placeholder:"Password","data-testid":"password-input"}),Object(f.jsx)(h.a,{disabled:a(),color:"red",fluid:!0,size:"large",onClick:function(){return r()},children:"Enviar"})]})})};function Y(e){return _.apply(this,arguments)}function _(){return(_=Object(l.a)(u.a.mark((function e(t){var n,r,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://segware-book-api.segware.io/api/forgot-password/".concat(t),r={"Content-Type":"application/json"},e.prev=2,e.next=5,k.a.get(n,r);case 5:if(a=e.sent,!(s=a.data)){e.next=9;break}return e.abrupt("return",s.password);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}var ee=function(){var e=Object(r.useState)(new Map),t=Object(p.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),o=Object(p.a)(s,2),i=o[0],d=o[1],b=function(){var e=Object(l.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.get("username"),e.next=3,Y(t);case 3:return r=e.sent,d(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(r.useCallback)((function(e){var t=e.target,n=t.name,r=t.value;a((function(e){return new Map(e).set(n,r)}))}),[]);return Object(f.jsx)(j.a,{textAlign:"center",style:{height:"115vh",backgroundColor:"rgb(33, 33, 33)",marginTop:"-15vh"},verticalAlign:"middle",children:Object(f.jsxs)(j.a.Column,{style:{maxWidth:450},children:[Object(f.jsx)(m,{message:"SEGWARE"}),Object(f.jsx)(v,{message:"RECUPEAR SENHA"}),Object(f.jsx)(Q,{formData:n,onInputChange:h,onHandleSubmit:b,isValid:function(){return!n.get("username")},showPassword:i}),Object(f.jsxs)(z,{children:["J\xe1 possui conta ? ",Object(f.jsx)(c.b,{to:"/sign-in",children:"logar"})]})]})})},te=n(118),ne=n(148),re=function(e){var t=e.component,n=Object(ne.a)(e,["component"]);return Object(f.jsx)(o.b,Object(te.a)(Object(te.a)({},n),{},{render:function(e){return localStorage.getItem("token")?Object(f.jsx)(t,Object(te.a)({},e)):Object(f.jsx)(o.a,{to:{pathname:"/sign-in",state:{from:e.location}}})}}))},ae=function(){return Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{exact:!0,path:"/sign-up",component:H}),Object(f.jsx)(o.b,{exact:!0,path:"/sign-in",component:E}),Object(f.jsx)(o.b,{exact:!0,path:"/",component:E}),Object(f.jsx)(o.b,{exact:!0,path:"/forgot-password",component:ee}),Object(f.jsx)(re,{exact:!0,path:"/feed",component:B}),Object(f.jsx)(re,{exact:!0,path:"/feeds",component:K})]})},se=Object(r.createContext)();var ce=function(e){var t=e.children,n=Object(r.useState)(!1),a=Object(p.a)(n,2),s=a[0],c=a[1];return Object(f.jsx)(se.Provider,{value:{isUsernameExist:s,setIsUsernameExist:c},children:t})},oe=function(){return Object(f.jsx)(ce,{children:Object(f.jsx)(ae,{})})};s.a.render(Object(f.jsx)(c.a,{basename:"/Teste-segware",children:Object(f.jsx)(oe,{})}),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.811351ef.chunk.js.map